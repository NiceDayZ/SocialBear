<!DOCTYPE html>
<html>
	<head>
		<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
		<meta content="utf-8" http-equiv="encoding">

		<title>SocialBear</title>
		<link rel="stylesheet" href="css/reset.css" />
		<link rel="stylesheet" href="css/profile.css" />
		<link rel="stylesheet" href="css/home.css" />
		<link rel="stylesheet" href="css/post.css" />
		<link rel="stylesheet" href="css/widget.css" />
		<link rel="stylesheet" href="css/menu.css" />
		<link rel="stylesheet" href="css/chat.css" /> 
	</head>
	<body>
	
		<header>
			<img src="img/header/menu-button.png" class="menu_img"/>
			<img src="img/header/SocialBear.png" class="logo"/>
			
			<input type="search" placeholder="Search" />
			
			<img src="img/header/user-shape.png" class="nav"/>
			<img src="img/header/notifications-button.png" class="nav"/>
			<img src="img/header/conversation-speech-bubbles-.png" class="nav"/>
			<img src="img/header/burn-button.png" class="nav"/>
			<img src="img/header/musica-searcher.png" class="nav_s"/>
		</header>
		<div class="menu">
			<div class="menu_element" id="myprofile">
				<img src="img/header/history-clock-button.png" class="element_image" />
				<h2>Menu title</h2>
			</div>
			<div class="menu_element">
				<img src="img/header/forward-arrow.png" class="element_image" />
				<h2>Menu title</h2>
			</div>
			<div class="menu_element">
				<img src="img/header/settings-cogwheel-button.png" class="element_image" />
				<h2>Menu title</h2>
			</div>
			<div class="menu_element">
				<img src="img/header/birthday-cake.png" class="element_image" />
				<h2>Menu title</h2>
			</div>
			<div class="menu_element">
				<img src="img/header/rubbish-bin-delete-button.png" class="element_image" />
				<h2>Menu title</h2>
			</div>
			<div class="menu_element">
				<img src="img/header/history-clock-button.png" class="element_image" />
				<h2>Menu title</h2>
			</div>
			<div class="menu_element">
				<img src="img/header/birthday-cake.png" class="element_image" />
				<h2>Menu title</h2>
			</div>
			<div class="menu_element" id = "logoutButton">
				<img src="img/header/ellipsis.png" class="element_image" />
				<h2>Menu title</h2>
			</div>
		</div>
		<div class="feed">
            <br/><br/>
			<div class="posts">
				<div class="post post_form" style="padding:0;">
                    <div id="description" contenteditable="true">Description</div>
					<div id="imageURL" contenteditable="true">Image URL</div>
					<div contenteditable="false">
                        <input type="checkbox" value="1" name="r1" id="r1" checked="checked"/>
						<label class="whatever" for="r1">Private</label>
					</div>
					
					
                    <button id="post_button" class="post_form_submit"></button>
                </div>
				<div class="post">
					<img class="profile_pic" src="img/profile/1.jpg" />
					<a href="/profiles/1mh234" >Full Name</a>
					<font>About 1 hour ago</font>
					<hr/>
					Loremp impsus is a generated random text. 
					Loremp impsus is a generated random text. 
					Loremp impsus is a generated random text. 
					Loremp impsus is a generated random text. 
					<img src="https://cdn.pixabay.com/photo/2018/01/14/2/12/nature-3082832__340.jpg" class="post_image" /> 
					<hr/>
					<button class="button like right">999</button>
					<button class="button ac_share right">23</button>
					<button class="button ac_comment left">11</button>
				</div>
				<div class="post">
					<img class="profile_pic" src="img/profile/2.jpg" />
					<a href="#" >Full Name</a>
					<font>About 1 hour ago</font>
					<hr/>
					Loremp impsus is a generated random text. 
					Loremp impsus is a generated random text. 
					Loremp impsus is a generated random text. 
					<hr/>
					<button class="button like right">999</button>
					<button class="button share right">23</button>
					<button class="button comment left">11</button>
				</div>
				<div class="post">
					<img class="profile_pic" src="img/profile/1.jpg" />
					<a href="#" >Full Name</a>
					<font>About 1 hour ago</font>
					<hr/>
					Loremp impsus is a generated random text. 
					Loremp impsus is a generated random text. 
					Loremp impsus is a generated random text. 
					Loremp impsus is a generated random text. 
					Loremp impsus is a generated random text. 
					Loremp impsus is a generated random text. 
					<img src="img/posts/2.jpg" class="post_image" />
					<hr/>
					<button class="button ac_like right">999</button>
					<button class="button ac_share right">23</button>
					<button class="button ac_comment left">11</button>
				</div>
				<div class="post">
					<img class="profile_pic" src="img/profile/4.jpg" />
					<a href="#" >Full Name</a>
					<font>About 1 hour ago</font>
					<hr/>
					<img src="img/posts/3.jpg" class="post_image" />
					<hr/>
					<button class="button like right">999</button>
					<button class="button share right">23</button>
					<button class="button comment left">11</button>
				</div>
				<div class="post">
					<img class="profile_pic" src="img/profile/5.jpg" />
					<a href="#" >Full Name</a>
					<font>About 1 hour ago</font>
					<hr/>
					Loremp impsus is a generated random text. 
					Loremp impsus is a generated random text. 
					Loremp impsus is a generated random text. 
					Loremp impsus is a generated random text. 
					Loremp impsus is a generated random text. 
					Loremp impsus is a generated random text. 
					<hr/>
					<button class="button ac_like right">999</button>
					<button class="button share right">23</button>
					<button class="button ac_comment left">11</button>
				</div>
				<div class="post">
					<img class="profile_pic" src="img/profile/3.jpg" />
					<a href="#" >Full Name</a>
					<font>About 1 hour ago</font>
					<hr/>
					Loremp impsus is a generated random text. 
					Loremp impsus is a generated random text. 
					Loremp impsus is a generated random text. 
					Loremp impsus is a generated random text. 
					Loremp impsus is a generated random text. 
					<img src="img/posts/4.jpg" class="post_image" />
					<hr/>
					<button class="button ac_like right">999</button>
					<button class="button share right">23</button>
					<button class="button comment left">11</button>
				</div>
				<div class="post">
					<img class="profile_pic" src="img/profile/1.jpg" />
					<a href="#" >Full Name</a>
					<font>About 1 hour ago</font>
					<hr/>
					Loremp impsus is a generated random text. 
					Loremp impsus is a generated random text. 
					<img src="img/posts/5.jpg" class="post_image" />
					<hr/>
					<button class="button ac_like right">999</button>
					<button class="button share right">23</button>
					<button class="button comment left">11</button>
				</div>
			</div>
		</div>
		<div class="chat">
			<div class="chat_element">
				<img src="img/profile/4.jpg" class="element_image" />
				<h2>Full Name</h2>
			</div>
			<div class="chat_element">
				<img src="img/profile/5.jpg" class="element_image" />
				<h2>Full Name</h2>
			</div>
			<div class="chat_element">
				<img src="img/profile/3.jpg" class="element_image" />
				<h2>Full Name</h2>
			</div>
			<div class="chat_element">
				<img src="img/profile/5.jpg" class="element_image" />
				<h2>Full Name</h2>
			</div>
		</div>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
		<script>
			
			
			$(window).on('load',function() { 
				$("img").each(function(){ 
					var image = $(this);
					//console.log(this.naturalWidth);
					if(this.naturalWidth == 0 || image.readyState == 'uninitialized'){
						console.log(image);
						$(image).unbind("error").hide();
					} 
				});

				if(document.cookie == ""){
					$("#myprofile").hide();
				}
			});

			$(document).ready(function() {
				$('#description').click(function(e){
					$('#description').text("");
				});
				$('#imageURL').click(function(e){
					$('#imageURL').text("");
				});
			});

			$("#logoutButton").click(function(e){
				document.cookie = "token= ; expires = Thu, 01 Jan 1970 00:00:00 GMT";
				window.location.href = "/";
			});

			$(document).ready(function() {
          		$('#post_button').click(function(e) {
					e.preventDefault();
					if($('#description').text() == "" || $('#description').text() == "Description"){
						alert("Description can not be null");
					}else if(!$('#imageURL').text().includes("http://") && !$('#imageURL').text().includes("https://") && !($('#imageURL').text() == "Image URL") && !($('#imageURL').text() == "")){
						alert("Invalid image URL");
					}else{
						var imgURL;
						if($('#imageURL').text() == "Image URL" || $('#imageURL').text() == ""){
							imgURL = "https://cdn.pixabay.com/photo/2018/01/1/23/12/nature-3082832__340.jpg";
						}else{
							imgURL = $('#imageURL').text();
						}
						$.ajax({
							type: 'POST',
							dataType: "text",
							url: '/postare',
							data: {description: $('#description').text(), imageUrl: imgURL, private: $('#r1').prop('checked') ? '1' : '0'},
							success: function(data)
							{
								if(data == "success"){
								window.location.href = "/";
								}else{
								alert("There was an error while posting your post");
								}
								
							}
						});
					}
				
          });
		});
		</script>
	</body>
</html>